<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex,nofollow">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="INE5646">
    <link rel="stylesheet" href="./css/style.css">

    <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/vs.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/javascript.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.9.0/highlightjs-line-numbers.min.js"></script>

    <title>Prática JavaScript Runtime & Async</title>

    <script>
        hljs.highlightAll();
        hljs.initLineNumbersOnLoad();
    </script>
</head>
<body>
    
<h1>Lista de exercícios sobre JS Runtime e JS assíncrono</h1>


<p>Esta lista tem o objetivo de que vocês testem na prática algumas questões de JavaScript, sob a luz da últimas aulas.</p>
<p>Para cada um dos exercícios, crie um script que execute o código da questão para você ver na prática o resultado.</p>
<p>Faço isso até mesmo para as questões que possuem a resposta esperada</p>
<p>Caso alguma resposta esteja diferente do que apareceu quando você rodar o script, me chame...</p>

<p>Recomenda-se também os exercícios apresentados em <a href="https://github.com/lydiahallie/javascript-questions/blob/master/pt-BR/README_pt_BR.md" target="_blank">JavaScript Questions</a> (em português!).
Em especial, sugiro os exercícios 1, 2, 9, 30, 45 e 73.</p>

<p>Implemente e/ou responda os exercícios propostos no HTML.</p> 

<div class="questao">
    <h2>Exercício 1. Implemente</h2>
    <p>Crie uma função calculadora, que recebe 3 parâmetros: valor a, valor b e uma função que fará o cálculo (chamada de f).</p>
    <p>A chamada dessa função calculadora deve retornar o retorno de f quando recebe os parâmetros a e b</p>
    <p>Crie também duas funções, soma e subtrai. Ambas recebem dois valores como parâmetro e retornam a soma e a subtração dos valores, respectivamente.</p>
    <p>
        Imprima no console o valor retornado pela função calculadora passando os sequintes parâmetros: 
        <ul>
            <li>a=31, b=12, f=soma</li>
            <li>a=11, b=25, f=subtrai</li>
        </ul>
    </p>
</div>

<div class="questao">
    <h2>Exercício 2. Qual a saída no console?</h2>

<pre><code>var callback = function() {
    console.log("Estou na função de callback");
}    
console.log("Iniciei")
setTimeout(callback, 5000);
console.log("Estou após o setTimeout")
</code></pre>
</div>

<div class="questao">
    <h2>Exercício 3. Qual a saída do console?</h2>

<pre><code>function consoleAtrasado(mensagem, atraso) {
    setTimeout(console.log(mensagem), atraso)
}
console.log("Olá")
consoleAtrasado("Teste", 10000)
console.log("Bye")
</code></pre> 
</div>

<div class="questao">
    <h2>Exercício 4. Correção de código</h2>

    <p>Corrija o código do exercício 3 para que a mensagem passada como parâmetro seja exibida no console apenas após o atraso.</p>
</div>


<div class="questao">
    <h2>Exercício 5. Qual a versão correta?</h2>
    <p>Dois colegas seus precisavam escrever um código em JS que deveria escrever "olá" no console e 2 segundos depois escreva "tchau".</p>
    <p>Um dos seus colegas escreveu o seguinte código:</p>

<pre><code>const olaTchau = () => {
    console.log("Olá")
    setTimeout(() => console.log("Tchau"), 2000)
}
olaTchau()
</code></pre> 

    <p>Seu outro colega escreveu:</p>
    
<pre><code>const olaETchau = () => {
    setTimeout(() => console.log("Tchau"), 2000)
    console.log("Olá")
}
olaETchau()
</code></pre>
    
    <p>Como os códigos estão diferentes, eles pediram a sua opinião para dizer qual dos dois funciona. Qual deles está certo?</p>
    <p>RESPOSTA: Ambos estão corretos, já que mesmo no segundo exemplo, após a chamada de setTimeout, console.log("Olá") será executado imediatamente, e "Tchau" aparecerá apenas 2 segundos depois de qualquer forma</p>
</div>

<div class="questao">
    <h2>Exercício 6. Qual a saída no console?</h2>

<pre><code>const resolverEm1s = new Promise(resolve => setTimeout(resolve, 1000));
for (let i = 0; i < 10; i++) {
    resolverEm1s.then(() => console.log("oi"))            
}
</code></pre>
</div>

<div class="questao">
    <h2>Exercício 7. Qual a saída no console?</h2>

<pre><code>const resolverEm1s = new Promise(resolve => setTimeout(resolve, 1000));
for (let i = 0; i < 10; i++) {
    resolverEm1s.then(() => console.log(i))            
}
</code></pre>
</div>

<div class="questao">
    <h2>Exercício 8. Qual a saída no console?</h2>

<pre><code>let i=0
let max = 10
function p() {
    pp = new Promise(resolve => setTimeout(resolve, 1000))
    pp.then(() => {
        console.log(i++)
        if (i < max) {
            return p()
        }
    })
    return pp
}        
p()
</code></pre>
</div>

<div class="questao">
    <h2>Exercício 9. Modificação de código</h2>
    <p>Modifique o código da questão 8 para usar async/await.</p>
</div>

<script>
    console.log("--- exercicio 1 ---");
    function calculadora(a, b, f) {
        return f(a, b);
    }
    function soma(a, b) {
        return a + b;
    }
    function subtrai(a, b) {
        return a - b;
    }
    console.log("31 + 12:", calculadora(31, 12, soma));
    console.log("11 - 25:", calculadora(11, 25, subtrai));

    console.log("\n\n");
    console.log("--- exercicio 2 ---");
    var callback = function() {
        console.log("Estou na função de callback (ex2)");
    }    
    console.log("Iniciei")
    setTimeout(callback, 5000);
    console.log("Estou após o setTimeout")

    console.log("\n\n--- exercicio 3 e 4---");
    function consoleAtrasado(mensagem, atraso) {
        setTimeout(() => {
            console.log(mensagem);
        }, atraso);
    }

    console.log("Olá");
    consoleAtrasado("Teste (ex4)", 10000);
    console.log("Bye");

    console.log("\n\n--- exercicio 5 ---");
    const olaTchau = () => {
        console.log("Olá (versao 1)");
        setTimeout(() => console.log("Tchau (versao 1)"), 2000);
    }
    const olaETchau = () => {
        setTimeout(() => console.log("Tchau (versao 2)"), 2000);
        console.log("Olá (versao 2)");
    }
    olaTchau();
    olaETchau();

    setTimeout(() => { // atraso para nao misturar com ex5
        console.log("\n\n--- exercicio 6 ---");
        const ex6 = new Promise(resolve => setTimeout(resolve, 1000));
        for (let i = 0; i < 10; i++) {
            ex6.then(() => console.log("oi"))            
        }
    }, 3000);

    setTimeout(() => { // atraso para nao misturar com ex6
        console.log("\n\n--- exercicio 7 ---");
        const ex7 = new Promise(resolve => setTimeout(resolve, 1000));
        for (let i = 0; i < 10; i++) {
            ex7.then(() => console.log(i))            
        }
    }, 5000);

    setTimeout(() => {
        console.log("\n\n--- exercicio 8 ---");
        let i=0
        let max = 10
        function p() {
            let pp = new Promise(resolve => setTimeout(resolve, 1000))
            pp.then(() => {
                console.log(i++)
                if (i < max) {
                    return p()
                } else {
                    // ja inicia ex9 apos ex8
                    exercicio9();
                }
            })
            return pp
        }        
        p();
    }, 7000);


    function exercicio9() {
        console.log("\n\n--- exercicio 9 ---");

        function atraso(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function contador() {
            for (let i = 0; i < 10; i++) {
                await atraso(1000);
                console.log(i);
            }
        }
        contador();
    }
</script>

</body>
</html>